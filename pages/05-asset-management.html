<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Asset Management - 3D Map Editor MVP Guide">
    <title>Asset Management - 3D Map Editor MVP Guide</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css">
</head>
<body>
    <header>
        <nav>
            <div class="home-link">
                <a href="../index.html">üè† 3D Map Editor MVP Guide</a>
            </div>
            <div class="nav-links">
                <a href="04-error-handling.html">‚Üê Previous: Error Handling</a>
                <a href="06-performance-metrics.html">Next: Performance Metrics ‚Üí</a>
            </div>
        </nav>
    </header>

    <main>
        <h1>5. Asset Management</h1>

        <section id="introduction">
            <h2>Introduction</h2>
            <p>Asset management handles loading, caching, and lifecycle management of 3D models, textures, and other resources. A robust asset system prevents redundant loading, manages memory efficiently, and provides fast access to resources.</p>
        </section>

        <section id="strategy">
            <h2>Asset Management Strategy</h2>
            
            <h3>Asset Types</h3>
            <ul>
                <li><strong>3D Models:</strong> Component meshes (walls, floors, stairs, etc.)</li>
                <li><strong>Textures:</strong> Diffuse, normal, and other material textures</li>
                <li><strong>Shaders:</strong> Vulkan SPIR-V shader modules</li>
                <li><strong>Materials:</strong> Material definitions referencing textures and shaders</li>
            </ul>

            <h3>Asset Loading System</h3>
            <pre><code class="language-cpp">// Asset handle system
using AssetHandle = uint64_t;

class AssetManager {
public:
    Result&lt;AssetHandle&gt; LoadModel(const std::string&amp; path);
    Result&lt;AssetHandle&gt; LoadTexture(const std::string&amp; path);
    
    // Get loaded asset
    std::shared_ptr&lt;Model&gt; GetModel(AssetHandle handle);
    std::shared_ptr&lt;Texture&gt; GetTexture(AssetHandle handle);
    
    // Reference counting
    void AddRef(AssetHandle handle);
    void Release(AssetHandle handle);
    
private:
    std::unordered_map&lt;AssetHandle, std::shared_ptr&lt;Asset&gt;&gt; assets_;
    std::unordered_map&lt;std::string, AssetHandle&gt; pathToHandle_;
};</code></pre>

            <h3>Caching Strategy</h3>
            <div class="info-box">
                <strong>Key Principles:</strong>
                <ul>
                    <li>Load assets once, reuse across instances</li>
                    <li>Reference count to know when to unload</li>
                    <li>LRU cache for automatic memory management</li>
                    <li>Async loading for non-blocking operations</li>
                </ul>
            </div>
        </section>

        <section id="file-formats">
            <h2>File Formats</h2>
            <div class="card">
                <table>
                    <thead>
                        <tr>
                            <th>Asset Type</th>
                            <th>Format</th>
                            <th>Library</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>3D Models</td>
                            <td>GLTF 2.0</td>
                            <td>tinygltf</td>
                        </tr>
                        <tr>
                            <td>Textures</td>
                            <td>PNG, JPEG</td>
                            <td>stb_image</td>
                        </tr>
                        <tr>
                            <td>Shaders</td>
                            <td>SPIR-V</td>
                            <td>glslang/shaderc</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <section id="summary">
            <h2>Summary</h2>
            <div class="card">
                <h3>Key Decisions</h3>
                <ul>
                    <li>‚úì Handle-based asset system with reference counting</li>
                    <li>‚úì GLTF 2.0 for 3D models</li>
                    <li>‚úì Centralized AssetManager for all resource loading</li>
                    <li>‚úì Async loading support for better performance</li>
                </ul>
            </div>
            <p><a href="06-performance-metrics.html" class="btn">Continue to Performance Metrics ‚Üí</a></p>
        </section>
    </main>

    <footer>
        <p><strong>3D Map Editor MVP Guide - Version 9.0</strong></p>
        <p>Page 5 of 35 | <a href="04-error-handling.html">Previous</a> | <a href="../index.html">Home</a> | <a href="06-performance-metrics.html">Next</a></p>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-cpp.min.js"></script>
</body>
</html>
